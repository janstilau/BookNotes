# 防御式编程  

## 避免程序遭受非法输入的破坏
* 好的程序
	* 垃圾进,什么都不出
	* 垃圾进,出去出错提示
	* 不允许垃圾进来
* 缺乏安全性的程序
	* 垃圾进,垃圾出
* 三种办法处理进来垃圾
	* 检查所有来源于外部的数据的值.确保在允许的范围之内.
	* 检查子程序的所有输入参数的值.
	* 决定如何处理错误的输入数据.

## 断言
* 断言,是指在开发期间使用的,让程序在运行时候进行自检的代码,断言为真,代表程序运行正常,断言为假,则意味着程序中发现了意料之外的错误.断言对于大型程序或者可靠性要求极高的程序尤其有用,通过断言,程序员可以快速的排查因为修改代码或者别的原因,导致的不匹配的接口假定和错误.  
* 断言可以用于代码的各种假定,澄清各种不希望的情形.断言主要是用在开发和维护阶段,通常只在开发阶段被编译进目标代码.
* 断言(bool,text).当bool为false的时候,打印text的值并退出程序.那么我们自己实现的话,就可以`if(!bool){logError(text);exit(-1);}`   

## 使用断言的建议  
* 用错误处理代码来处理预期发生的状况,用断言来处理绝不应该发生的状况.  
	断言是用来检查永远不该发生的情况,用来检查代码中的bug.  
	错误处理啊代码用来检查不太可能发生的非正常情况,这些在写代码的时候就可以预料的到,并且需要在代码里处理.  
	如果触发了错误处理代码,代表着程序有了错误,这个错误可能是之前的数据错误,程序应该对错误进行处理,例如,返回一个提示.而触发了断言,一般代表着,程序代码的逻辑出现了问题,需要修改源代码.   
	
* 避免把需要执行的程序写到断言里面.  
	ASSERT(performAction()) . 这样写的问题在于,如果没有把断言编译进执行代码,那么应该执行的代码段,就永远不能执行了.应该把运行结果赋值给变量,然后用断言测试变量.  
	
* 对于高健壮性的代码,应该先使用断言在处理错误.  
	程序的开发维护,可能经历了许多的版本,经历了长久的时间.导致,在开发阶段不能完全的清除错误,这个时候,还需要在程序里面加上错误的处理方法.断言,可以在开发阶段尽量的排查错误,但是不能解决所有的问题.但是在发布阶段,也是需要这些处理这样的错误的.所以,对于同样的一个错误,先进行断言,后用错误处理代码处理同一个错误,是很常见的.  
	例如,有一个int值,是需要在一个范围里面的,自然可以断言,但是在发布程序的时候,也有可能传进超过的数据.那么错误处理程序,可以让这个数字归到默认值,或者返回错误提示.
	
	