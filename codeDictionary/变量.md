# 变量

隐式变量声明, 对于任何一种语言来说, 都是最具有危险的特性之一.
不合理的初始化数据, 是产生错误的常见根源之一.
1. 在声明变量的时候初始化.
1. 就近原则, 相关的操作放在一起, 控制循环的代码靠近循环本身, 不要为了性能, 重用之前定义的但是有着别的用途的变量.
1. 如果可能, 尽量使用const
1. 特别注意计数器和累加器, 要不要重置.
1. 类的构造函数了里面, 要初始化所有的类的成员变量.
1. 一次性初始化具名常量, 这些常量放在一起, 例如startUp函数, 而这个函数, 只会调用一次.
1. 对函数的参数, 做校验工作.

## 作用域

变量在程序内部的可见和可引用的范围.
那些介于同一变量多个引用点之间的代码被称为是攻击窗口, 可能在这些代码里不断地修改这个变量, 一般而言, 尽量的把引用点集中在一起总是很好的做法.
把引用点集中起来的主要好处, 是提高程序的可读性.

尽可能的缩短变量的存活时间. 也就是变量存在期间所跨越的语句总数. 存活时间, 开始于引用的第一条语句, 结束于引用的最后一条语句. 
减少跨度, 减少存活时间, 目的都是在于减少攻击窗口, 让变量被修改的机会变少.
并且, 变量集中在一起使用, 可以增加可读性, 也让思路能够集中.
在抽取代码为函数, 或者修改代码为循环的时候, 靠近声明初始化的变量, 也会减少许多的参数的传递, 减少很多工作.

## 减少作用域的建议

1. 在循环开始前进行初始化, 而不是子程序的开头. 这样, 在加外层循环的时候, 初始化代码每次都会执行.
1. 在变量即将被使用的时候在进行初始化.
1. 相关的语句要放在一起. 相关的语句, 从多小的范围来看都不过分, 一共10行的代码, 6行是一个意义, 4行是一个意义, 那么这两部分就应该有空行的间隔.
1. 在不知道作用域到底为多少的时候, 采用最严格的模式. 全局 -> 类变量 -> private变量, 是一个很痛苦的过程, 而反过来却很简单.

变量的作用域过大, 会让写代码的人很方便, 但是读代码的人很痛苦. 并且, 这样耦合大大增加. 所以, 要时刻警醒.

## 绑定时间

也就是变量初始化为某个值得时间. 从早到晚为.
1. 编码时, 硬编码
    int color = 0xffff;
1. 编译时, 使用具名常量
    static COLOR = 0xffff;
    void subFunc(){int color = COLOR}
1. 加载时, 读取配置文件, 或者数据库
1. 实时. int color = getColor()

绑定时间越早, 灵活性越差, 但是复杂度也会降低. 应该合理的选择. 一般来说, 硬编码应该舍弃.

每个变量, 只用于一种用途. temp = 3, xxxxxx, temp = arra[1]. yyyyyy. 千万不能写这样的代码.

避免让变量拥有隐藏含义, 例如, pagePrinted, 表示打印张数, -1的时候表示发生了错误. 这种变量, 实际是int 和 bool的结合体, 就算自己知道含义, 阅读代码的人也是很疑惑.
