# 直线型代码

## 明确的顺序的语句

data = readData()
result = calculateResultFromData(data)
printResult(result)

上面的语句, 很明确的指明了顺序

computeMonthly()
computeQuarterly()
computeAnnual()

上面的语句, 如果是专业的财务人员, 可能知道计算要从小到大, 但是, 谁知道Annual里面会不会自动的调用上面两个呢.

* 如果语句中, 存在着依赖关系, 要求你将语句按照一定的顺序进行排列, 那么一定要设法使得这些依赖关系明显.

1. 设法组织代码, 让依赖关系变得明显.
    我们假设, computeMonthly里面会初始化一些东西, 因为我们认为从小到大的计算是最合理的情况. 但是为什么不能一下子计算出annual呢. compute的含义, 其实并没有初始化的意思. 我们应该写一个真正的初始化的函数, 例如initData.
1. 函数名要凸显自己的功能. computeMonthly应该是computeMonthlyAndInitData. 这个程序名很差, 是因为这个函数的功能太差了, 包含了两个功能, 没有做到职能的单一化. 但是, 正确的表明函数的职能.
1. 利用参数, 来明确的显示依赖的关系.
    如果compute....ly(expenseData), 都是这样的模式, 那么至少我们知道, 这些操作之间是有联系的. 更好的写法是, 传入expenseData, 传出更新后的expenseData, 这样, 依赖顺序来执行函数这一事实就更加明显了.
    这种用参数的写法, 也能明确的表示, 顺序不重要, 如果几个函数传入参数都是不同的对象, 也就表明, 这几个函数其实是顺序无关的.
1. 用注释来对不清晰的依赖关系进行说明. 首先, 尽力写没有顺序依赖关系的代码, 其次, 尽力写依赖关系明显的代码, 然后如果还不能很清楚, 就用文档来说明
1. 用断言或者错误处理代码来进行依赖的核查

## 顺序无关的语句

    有些语句是顺序无关的. 这个时候的原则就是, 把相关的操作要放在一起.

### 让代码从上而下阅读

    如果, 有人在阅读你的代码的时候, 需要搜索整个应用程序, 那么就应该重新组织你的代码了.
    例如

```
    Data a;
    Data bb;
    Data ccc;

    a.compute();
    bb.compute();
    ccc.compute();

    a.upload();
    bb.upload();
    ccc.upload();

    a.download();
    bb.download();
    ccc.download();

```

    这段代码, 要完整知道Data的功能, 需要上下查看好多次, 但是完全可以a.1, a.2, a.3 这样集中在一起. 这样a的功能集中, a的变量的跨度也小, a只出现在一小段代码里面. a的存活行数小.

检查好的功能分割的办法, 就是在任务上画外围框, 好的布局, 框框之间会有嵌套, 但是很少交叉. 坏的布局, 就会有很多交叉.